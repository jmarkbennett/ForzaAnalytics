@page
@model ForzaAnalytics.Web.Pages.LapTimesModel
@{
    ViewData["Title"] = "Lap Times";
}

<p>Please load a telemetry file</p>
<hr />
<form method="post" enctype="multipart/form-data" name="telemetryForm">
    <div class="mb-3" name="formContainer">
        <label for="telemtryFile" class="form-label">Telemetry File:</label>
        <input type="file" class="form-control-sm" accept=".fztel" name="telemetryFile">
        <button type="submit" class="btn btn-primary">Load</button>
    </div>
</form>
<hr />
<div class="container">
    <table class="table" id="lapTimesTable">
        <thead>
            <tr>
                <td scope="col">Lap Number</td>
                <td scope="col">Time</td>
                <td scope="col">Fuel Remaining</td>
                <td scope="col">Avg. Speed</td>
                <td scope="col">% Full Throttle</td>
                <td scope="col">% Brake</td>
                <td scope="col">Min. Speed</td>
                <td scope="col">Max. Speed</td>
                <td scope="col">Fuel Used</td>
                <td scope="col">Is Best Lap</td>
            </tr>
        </thead>
    </table>
</div>

@section Scripts{
    @if (Model.Telemetry.ExtendedPositions.Count > 0)
    {
        <script>
            ClearLapTimeTable()
            LoadLapTimes(@Html.Raw(Json.Serialize(Model.LapTimes)));
        </script>
    }
}